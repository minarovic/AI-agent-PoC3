@startuml DeploymentWorkflow

title "AI-agent-Ntier Deployment Workflow"

' Styly pro diagram
skinparam backgroundColor #EEEBDC
skinparam handwritten false
skinparam defaultFontName "Arial"
skinparam activityBackgroundColor #FEFECE
skinparam activityArrowColor #666666
skinparam activityBorderColor #454645

' Hlavní workflow
start

:Vývoj kódu;

:Spustit verify_deployment.sh;
note right: Kontrola správnosti kódu,\nimportů a konfigurace

if (Verifikace úspěšná?) then (ano)
  :Lokální testování;
  note right: Pouze s deploy_to_langgraph_platform.sh\nBez Docker souborů
else (ne)
  :Oprava chyb v kódu;
  note right: Řešení importů,\nasynchronních funkcí, apod.
  goto Spustit verify_deployment.sh;
endif

if (Testování úspěšné?) then (ano)
  :Spustit deploy_to_github.sh;
  note right: Push čistého kódu na GitHub\nBez Docker souborů
else (ne)
  :Ladění a oprava chyb;
  goto Lokální testování;
endif

:Propojení GitHub Repository s LangGraph Platform;
note right: Nastavit automatické nasazení\npři push do hlavní větve

:LangGraph Platform sestaví a nasadí aplikaci;
note right: Automaticky podle langgraph.json

:Verifikace funkčnosti v LangGraph Platform;

if (Nasazení úspěšné?) then (ano)
  :Monitoring a údržba aplikace;
else (ne)
  :Analýza logů z LangGraph Platform;
  :Oprava konfigurace nebo kódu;
  goto Spustit verify_deployment.sh;
endif

stop

@enduml
