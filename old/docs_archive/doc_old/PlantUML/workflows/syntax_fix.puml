@startuml "Syntax-Error-Fix-Workflow"
' Diagram demonstrující opravu syntaktické chyby v graph_nodes.py
' MB_TOOL case flow diagram

title "Oprava syntaktické chyby v retrieve_company_data"

skinparam backgroundColor white
skinparam handwritten false
skinparam defaultTextAlignment center
skinparam ActivityBorderColor #2c3e50
skinparam ActivityBackgroundColor #ecf0f1
skinparam ActivityDiamondBorderColor #2c3e50
skinparam ActivityDiamondBackgroundColor #ecf0f1
skinparam NoteBackgroundColor #fef9e7
skinparam NoteBorderColor #f39c12

partition "Před opravou (chybná syntaxe)" {
  start
  :Získání parametrů dotazu;
  :Kontrola platnosti názvu společnosti;
  :Získání MCP konektoru;
  if (company_name == "MB TOOL"?) then (ano)
    :Vytvoření fallback dat;
    ' Chybí return zde
  else (ne)
    :try:
      Získání dat z konektoru;
    note right: Chyba: return není správně odsazen
    :return {...};
    :except:
      Zpracování chyby;
    note right: Špatná indentace
    :return {...};
  endif
  stop
}

partition "Po opravě (správná syntaxe)" {
  start
  :Získání parametrů dotazu;
  :Kontrola platnosti názvu společnosti;
  :Získání MCP konektoru;
  if (company_name == "MB TOOL"?) then (ano)
    :Vytvoření fallback dat;
    :return {...};
    note right: Přidán chybějící return
  else (ne)
    :try:
      Získání dat z konektoru
      return {...};
    note right: Správná struktura try-bloku s return uvnitř
    :except: 
      Zpracování chyby
      return {...};
    note right: Správně odsazený except blok
  endif
  stop
}

@enduml
