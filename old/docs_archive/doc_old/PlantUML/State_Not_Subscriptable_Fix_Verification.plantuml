@startuml "State-Not-Subscriptable-Fix-Verification"
' Diagram dokumentující verifikaci opravy TypeError: State object not subscriptable

!theme plain
skinparam TitleFontSize 18
skinparam ArrowColor #333333
skinparam NoteBackgroundColor #f0f8ff
skinparam NoteBorderColor #87CEFA

title "Verifikace opravy TypeError: 'State' object is not subscriptable"

rectangle "LangGraph Platform Error" as Error #ffdddd {
  card "TypeError: 'State' object is not subscriptable" as TypeError
  note bottom of TypeError
    V kódu se aplikace snažila
    přistupovat k vlastnosti State
    pomocí syntaxe slovníku:
    **x["state"].query_type**
  end note
}

rectangle "Původní implementace" as Original #efefef {
  card "graph.py" as OrigGraph {
    card "lambda x: x[\"state\"].query_type" as OrigCode
  }
}

rectangle "Opravená implementace" as Fixed #e6ffe6 {
  card "graph.py" as FixedGraph {
    card "lambda x: x.query_type" as FixedCode
    note right of FixedCode
      x je přímo objekt State, 
      ne slovník obsahující state
    end note
  }
}

rectangle "Verifikace opravy" as Verification #e6f7ff {
  card "Kontrola kódu" as CodeCheck {
    note bottom
      1. Ověření, že žádné další výskyty
         x["state"] se v kódu nenacházejí
      2. Otestování funkčnosti na LangGraph Platform
      3. Verifikace správné funkce workflow
    end note
  }
}

Error -[#red]-> Original : "způsobilo"
Original -[#blue]-> Fixed : "opraveno na"
Fixed -[#green]-> Verification : "ověřeno pomocí"

@enduml
