@startuml "State-Not-Subscriptable-Fix"
' Diagram zobrazující opravu TypeError: State object not subscriptable

!theme plain
skinparam TitleFontSize 18
skinparam ArrowColor #333333
skinparam NoteBackgroundColor #f0f8ff
skinparam NoteBorderColor #87CEFA

title "Oprava TypeError: 'State' object is not subscriptable"

rectangle "LangGraph Platform Error" as Error #ffdddd {
  card "TypeError: 'State' object is not subscriptable" as TypeError
  note bottom of TypeError
    V kódu se aplikace snaží
    přistupovat k vlastnosti State
    pomocí syntaxe slovníku:
    **x["state"].query_type**
  end note
}

rectangle "Původní implementace" as Original #efefef {
  card "graph.py" as OrigGraph {
    card "lambda x: x[\"state\"].query_type" as OrigCode
  }
  note bottom of OrigCode
    Předpokládá, že x je slovník
    s klíčem "state", který
    obsahuje State objekt
  end note
}

rectangle "Opravená implementace" as Fixed #e6ffe6 {
  card "graph.py" as FixedGraph {
    card "lambda x: x.query_type" as FixedCode
  }
  note bottom of FixedCode
    Bere v úvahu, že x je přímo
    instance třídy State, a přistupuje
    k atributu query_type přímo
  end note
}

Error --> Original : způsobuje

Original --> Fixed : opraveno na

Fixed --> "LangGraph Platform Success" #d6ffd6 : vede k

@enduml
